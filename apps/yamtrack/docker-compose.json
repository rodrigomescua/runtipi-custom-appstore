{
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json",
  "services": [
    {
      "name": "yamtrack",
      "image": "ghcr.io/fuzzygrim/yamtrack:0.24.11",
      "isMain": true,
      "internalPort": "8000",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/db",
          "containerPath": "/yamtrack/db",
          "readOnly": false
        }
      ],
      "environment": [
        { "key": "TZ", "value": "${TZ}"},
        { "key": "SECRET", "value": "${SECRET}"},
        { "key": "REDIS_URL", "value": "redis://redis:6379" }
      ],
      "dependsOn": { "redis": { "condition": "service_healthy" } }
    },
    {
      "name": "redis",
      "image": "redis:8-alpine",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/redis",
          "containerPath": "/data",
          "readOnly": false
        }
      ]
    }
  ]
}