{
  "services": [
    {
      "isMain": true,
      "name": "media-manager-frontend",
      "image": "ghcr.io/maxdorninger/mediamanager/frontend:1.5.0",
      "environment": {
        "PUBLIC_API_URL": "${APP_HOST}:8000/api/v1"
      },
      "internalPort": 3000
    },
    {
      "name": "media-manager-backend",
      "image": "ghcr.io/maxdorninger/mediamanager/backend:1.5.0",
      "environment": {
        "CONFIG_FILE": "/app/config.toml",
        "PUID": "1000",
        "PGID": "1000",
        "TZ": "${TZ}"
      },
      "internalPort": 8000,
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/data",
          "containerPath": "/data",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "${ROOT_FOLDER_HOST}/media",
          "containerPath": "/media",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/config/config.toml",
          "containerPath": "/app/config.toml",
          "readOnly": false,
          "shared": false,
          "private": false
        }
      ]
    },
    {
      "name": "media-manager-db",
      "image": "postgres:latest",
      "environment": {
        "POSTGRES_USER": "MediaManager",
        "POSTGRES_DB": "MediaManager",
        "POSTGRES_PASSWORD": "MediaManager"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/postgres",
          "containerPath": "/var/lib/postgresql/data",
          "readOnly": false,
          "shared": false,
          "private": false
        }
      ],
      "healthCheck": {
        "test": "pg_isready -d $${POSTGRES_DB} -U $${POSTGRES_USER}",
        "interval": "10s",
        "timeout": "5s",
        "retries": 5
      }
    }
  ]
}